<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Beluna Cafe ‚Äî Haight-Ashbury, San Francisco</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #FAF6F1;
    --text: #2D2A26;
    --accent: #C87941;
    --accent2: #6B8F71;
    --card-bg: rgba(255,255,255,0.72);
    --card-border: rgba(200,121,65,0.15);
  }

  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    overflow-x: hidden;
  }

  #three-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: -1;
    pointer-events: none;
  }

  /* NAV */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    padding: 1.2rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(250,246,241,0.82);
    backdrop-filter: blur(14px);
    border-bottom: 1px solid rgba(200,121,65,0.12);
  }

  .nav-logo {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.2rem, 2vw, 1.5rem);
    color: var(--text);
    letter-spacing: 0.02em;
  }

  .nav-logo span { color: var(--accent); }

  .nav-links {
    display: flex;
    gap: 2rem;
    list-style: none;
  }

  .nav-links a {
    text-decoration: none;
    color: var(--text);
    font-size: 0.9rem;
    font-weight: 500;
    letter-spacing: 0.04em;
    opacity: 0.75;
    transition: opacity 0.2s, color 0.2s;
  }

  .nav-links a:hover { opacity: 1; color: var(--accent); }

  /* HERO */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: clamp(6rem,12vw,10rem) 1.5rem 4rem;
    position: relative;
  }

  .hero-badge {
    display: inline-block;
    font-size: 0.78rem;
    font-weight: 500;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--accent2);
    background: rgba(107,143,113,0.12);
    border: 1px solid rgba(107,143,113,0.3);
    border-radius: 50px;
    padding: 0.4rem 1.2rem;
    margin-bottom: 1.8rem;
  }

  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(3.2rem, 9vw, 7.5rem);
    font-weight: 600;
    line-height: 1.05;
    letter-spacing: -0.02em;
    color: var(--text);
    margin-bottom: 0.3rem;
  }

  .hero h1 em {
    font-style: italic;
    color: var(--accent);
  }

  .hero-tagline {
    font-size: clamp(1rem, 2.2vw, 1.35rem);
    font-weight: 300;
    color: var(--text);
    opacity: 0.7;
    max-width: 540px;
    margin: 1.4rem auto 2.8rem;
    line-height: 1.65;
  }

  .btn-primary {
    display: inline-block;
    background: var(--accent);
    color: #fff;
    text-decoration: none;
    font-weight: 500;
    font-size: 1rem;
    letter-spacing: 0.04em;
    padding: 0.95rem 2.4rem;
    border-radius: 50px;
    transition: transform 0.25s, box-shadow 0.25s, background 0.25s;
    box-shadow: 0 6px 24px rgba(200,121,65,0.35);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 32px rgba(200,121,65,0.45);
    background: #b8683a;
  }

  .btn-secondary {
    display: inline-block;
    background: transparent;
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
    font-size: 1rem;
    letter-spacing: 0.04em;
    padding: 0.95rem 2.4rem;
    border-radius: 50px;
    border: 2px solid var(--accent);
    transition: transform 0.25s, background 0.25s, color 0.25s;
  }

  .btn-secondary:hover {
    background: var(--accent);
    color: #fff;
    transform: translateY(-2px);
  }

  .hero-ctas { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }

  .scroll-hint {
    position: absolute;
    bottom: 2.5rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.4rem;
    opacity: 0.45;
    font-size: 0.72rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .scroll-hint .line {
    width: 1px;
    height: 40px;
    background: var(--text);
    animation: scrollLine 1.8s ease-in-out infinite;
  }

  @keyframes scrollLine {
    0%,100% { transform: scaleY(1); opacity:1; }
    50% { transform: scaleY(0.4); opacity:0.3; }
  }

  /* SECTION BASE */
  section { padding: clamp(4rem, 8vw, 7rem) clamp(1.2rem, 5vw, 2rem); }

  .container { max-width: 1100px; margin: 0 auto; }

  .section-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--accent2);
    margin-bottom: 1rem;
  }

  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2rem, 4.5vw, 3.2rem);
    font-weight: 600;
    line-height: 1.15;
    color: var(--text);
    margin-bottom: 1.5rem;
  }

  /* ABOUT */
  .about-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
  }

  .about-text p {
    font-size: clamp(0.95rem, 1.6vw, 1.1rem);
    line-height: 1.85;
    opacity: 0.8;
    margin-bottom: 1.2rem;
  }

  .about-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .feature-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 1.5rem;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    transition: transform 0.25s, box-shadow 0.25s;
  }

  .feature-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 32px rgba(0,0,0,0.1);
  }

  .feature-icon {
    font-size: 1.8rem;
    margin-bottom: 0.7rem;
    display: block;
  }

  .feature-card h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.4rem;
    color: var(--text);
  }

  .feature-card p {
    font-size: 0.83rem;
    opacity: 0.68;
    line-height: 1.6;
  }

  /* MENU HIGHLIGHTS */
  .menu-section { background: rgba(107,143,113,0.06); }

  .menu-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-top: 2.5rem;
  }

  .menu-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 2rem 1.6rem;
    backdrop-filter: blur(12px);
    box-shadow: 0 4px 24px rgba(0,0,0,0.06);
    text-align: center;
    transition: transform 0.25s, box-shadow 0.25s;
  }

  .menu-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 14px 40px rgba(200,121,65,0.15);
  }

  .menu-emoji { font-size: 2.8rem; margin-bottom: 1rem; display: block; }

  .menu-card h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    margin-bottom: 0.6rem;
    color: var(--text);
  }

  .menu-card p { font-size: 0.88rem; opacity: 0.7; line-height: 1.6; }

  .menu-tag {
    display: inline-block;
    margin-top: 1rem;
    font-size: 0.72rem;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--accent);
    background: rgba(200,121,65,0.1);
    border-radius: 50px;
    padding: 0.3rem 0.9rem;
  }

  /* HOURS */
  .hours-contact-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: start;
  }

  .hours-table { width: 100%; border-collapse: collapse; }

  .hours-table tr { border-bottom: 1px solid rgba(45,42,38,0.08); }

  .hours-table td {
    padding: 0.75rem 0;
    font-size: 0.92rem;
  }

  .hours-table td:first-child { opacity: 0.65; }
  .hours-table td:last-child { text-align: right; font-weight: 500; }

  .today-row td { color: var(--accent); font-weight: 600; }
  .today-row td:first-child { opacity: 1; }

  /* CONTACT */
  .contact-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 2.5rem;
    backdrop-filter: blur(12px);
    box-shadow: 0 4px 28px rgba(0,0,0,0.07);
  }

  .contact-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .contact-icon {
    width: 42px;
    height: 42px;
    border-radius: 12px;
    background: rgba(200,121,65,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    flex-shrink: 0;
  }

  .contact-item a {
    color: var(--text);
    text-decoration: none;
    font-size: 0.95rem;
    line-height: 1.5;
    transition: color 0.2s;
  }

  .contact-item a:hover { color: var(--accent); }

  .contact-label {
    font-size: 0.72rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    opacity: 0.5;
    display: block;
    margin-bottom: 0.2rem;
  }

  .social-row {
    display: flex;
    gap: 0.8rem;
    margin-top: 1.8rem;
  }

  .social-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    font-size: 0.82rem;
    font-weight: 500;
    color: var(--text);
    background: rgba(45,42,38,0.06);
    border: 1px solid rgba(45,42,38,0.12);
    border-radius: 50px;
    padding: 0.5rem 1.1rem;
    transition: background 0.2s, color 0.2s, border-color 0.2s;
  }

  .social-btn:hover {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }

  /* MAP CTA */
  .cta-banner {
    background: linear-gradient(135deg, var(--accent) 0%, #b8683a 100%);
    border-radius: 24px;
    padding: clamp(2.5rem,5vw,4rem) clamp(2rem,5vw,4rem);
    text-align: center;
    color: #fff;
    margin: 0 clamp(1rem,3vw,2rem) 4rem;
    position: relative;
    overflow: hidden;
  }

  .cta-banner::before {
    content: '';
    position: absolute;
    top: -40%; right: -10%;
    width: 350px; height: 350px;
    border-radius: 50%;
    background: rgba(255,255,255,0.07);
    pointer-events: none;
  }

  .cta-banner h2 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    margin-bottom: 0.8rem;
    font-weight: 600;
  }

  .cta-banner p {
    font-size: clamp(0.9rem,1.6vw,1.1rem);
    opacity: 0.85;
    margin-bottom: 2rem;
  }

  .btn-white {
    display: inline-block;
    background: #fff;
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
    font-size: 1rem;
    padding: 0.95rem 2.4rem;
    border-radius: 50px;
    transition: transform 0.25s, box-shadow 0.25s;
    box-shadow: 0 6px 24px rgba(0,0,0,0.15);
  }

  .btn-white:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 32px rgba(0,0,0,0.22);
  }

  /* FOOTER */
  footer {
    text-align: center;
    padding: 2rem 1rem;
    font-size: 0.8rem;
    opacity: 0.5;
    border-top: 1px solid rgba(45,42,38,0.1);
  }

  footer a { color: var(--text); }

  /* DIVIDER */
  .divider {
    width: 60px;
    height: 3px;
    background: var(--accent);
    border-radius: 2px;
    margin-bottom: 1.5rem;
  }

  /* RESPONSIVE */
  @media (max-width: 768px) {
    .nav-links { display: none; }
    .about-grid { grid-template-columns: 1fr; }
    .menu-grid { grid-template-columns: 1fr; }
    .hours-contact-grid { grid-template-columns: 1fr; }
    .about-cards { grid-template-columns: 1fr 1fr; }
  }

  @media (max-width: 480px) {
    .about-cards { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<canvas id="three-canvas"></canvas>

<!-- NAV -->
<nav>
  <div class="nav-logo">Beluna <span>Cafe</span></div>
  <ul class="nav-links">
    <li><a href="#about">About</a></li>
    <li><a href="#menu">Menu</a></li>
    <li><a href="#hours">Hours</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
  <a href="tel:4158297413" class="btn-primary" style="padding:0.6rem 1.4rem;font-size:0.88rem;">Call Us</a>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">‚òï Haight-Ashbury ¬∑ San Francisco</div>
  <h1>Your Neighborhood<br><em>Coffee Haven</em></h1>
  <p class="hero-tagline">Specialty pour-overs, house-made pastries, and a sunny back patio ‚Äî where the Haight slows down and savors every sip.</p>
  <div class="hero-ctas">
    <a href="tel:4158297413" class="btn-primary">Call (415) 829-7413</a>
    <a href="https://www.google.com/maps/search/?api=1&query=1195+Oak+St+San+Francisco+CA+94117" target="_blank" class="btn-secondary">Get Directions</a>
  </div>
  <div class="scroll-hint">
    <div class="line"></div>
    <span>Scroll</span>
  </div>
</section>

<!-- ABOUT -->
<section id="about">
  <div class="container">
    <div class="about-grid">
      <div class="about-text" data-aos="fade-right">
        <span class="section-label">Our Story</span>
        <div class="divider"></div>
        <h2 class="section-title">A place to<br>belong & brew</h2>
        <p>Beluna Cafe is the beating heart of the Haight-Ashbury neighborhood ‚Äî a plant-filled haven where specialty coffee meets genuine community. Every detail is intentional, from our rotating single-origin beans sourced from family farms to our house-made pastries baked fresh each morning.</p>
        <p>Whether you're catching up with a friend on the sunny back patio, diving into work with a perfect pour-over, or discovering your new favorite pastry, Beluna is your daily ritual made beautiful.</p>
      </div>
      <div class="about-cards" data-aos="fade-left" data-aos-delay="150">
        <div class="feature-card">
          <span class="feature-icon">üåø</span>
          <h3>Plant-Filled Space</h3>
          <p>A lush, living interior that feels like home the moment you walk in.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">‚òï</span>
          <h3>Pour-Over Bar</h3>
          <p>Rotating single-origin beans brewed with precision and care.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ü•ê</span>
          <h3>House Pastries</h3>
          <p>Baked in-house daily ‚Äî croissants, scones, and seasonal specials.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">‚òÄÔ∏è</span>
          <h3>Sunny Patio</h3>
          <p>Our beloved back patio ‚Äî the perfect spot for slow mornings.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- MENU HIGHLIGHTS -->
<section id="menu" class="menu-section">
  <div class="container">
    <div style="text-align:center;" data-aos="fade-up">
      <span class="section-label">What We Brew & Bake</span>
      <div class="divider" style="margin:1rem auto 0;"></div>
      <h2 class="section-title" style="margin-top:1rem;">Menu Highlights</h2>
      <p style="opacity:0.65;max-width:500px;margin:0 auto 0.5rem;font-size:0.95rem;line-height:1.7;">From our carefully curated coffee menu to our scratch-made kitchen ‚Äî every item tells a story.</p>
    </div>
    <div class="menu-grid">
      <div class="menu-card" data-aos="fade-up" data-aos-delay="0">
        <span class="menu-emoji">‚òï</span>
        <h3>Single-Origin Pour-Over</h3>
        <p>Rotating beans from Ethiopia, Colombia & beyond ‚Äî bright, nuanced, and never ordinary.</p>
        <span class="menu-tag">Specialty Coffee</span>
      </div>
      <div class="menu-card" data-aos="fade-up" data-aos-delay="100">
        <span class="menu-emoji">ü•ê</span>
        <h3>Butter Croissants</h3>
        <p>Laminated in-house with cultured butter ‚Äî shatteringly flaky, warm from the oven.</p>
        <span class="menu-tag">House-Made Daily</span>
      </div>
      <div class="menu-card" data-aos="fade-up" data-aos-delay="200">
        <span class="menu-emoji">üçµ</span>
        <h3>Matcha Latte</h3>
        <p>Ceremonial grade matcha with oat milk ‚Äî earthy, creamy, and beautifully calming.</p>
        <span class="menu-tag">Plant-Based</span>
      </div>
      <div class="menu-card" data-aos="fade-up" data-aos-delay="300">
        <span class="menu-emoji">ü´ñ</span>
        <h3>Cortado</h3>
        <p>Equal parts espresso and steamed milk ‚Äî bold, balanced, and perfect in every way.</p>
        <span class="menu-tag">Espresso Bar</span>
      </div>
      <div class="menu-card" data-aos="fade-up" data-aos-delay="400">
        <span class="menu-emoji">üçã</span>
        <h3>Seasonal Scones</h3>
        <p>Rotating flavors that follow the seasons ‚Äî lemon lavender, cardamom pear & more.</p>
        <span class="menu-tag">Rotating Menu</span>
      </div>
      <div class="menu-card" data-aos="fade-up" data-aos-delay="500">
        <span class="menu-emoji">üßã</span>
        <h3>Cold Brew</h3>
        <p>Steeped 18 hours for a smooth, rich cup ‚Äî served over ice, all day long.</p>
        <span class="menu-tag">All Day</span>
      </div>
    </div>
  </div>
</section>

<!-- HOURS & CONTACT -->
<section id="hours">
  <div class="container">
    <div class="hours-contact-grid">
      <div data-aos="fade-right">
        <span class="section-label">When We're Open</span>
        <div class="divider"></div>
        <h2 class="section-title">Hours</h2>
        <table class="hours-table">
          <tbody>
            <tr><td>Monday</td><td>7:00 AM ‚Äì 5:00 PM</td></tr>
            <tr><td>Tuesday</td><td>7:00 AM ‚Äì 5:00 PM</td></tr>
            <tr><td>Wednesday</td><td>7:00 AM ‚Äì 5:00 PM</td></tr>
            <tr><td>Thursday</td><td>7:00 AM ‚Äì 5:00 PM</td></tr>
            <tr><td>Friday</td><td>7:00 AM ‚Äì 6:00 PM</td></tr>
            <tr><td>Saturday</td><td>8:00 AM ‚Äì 6:00 PM</td></tr>
            <tr><td>Sunday</td><td>8:00 AM ‚Äì 4:00 PM</td></tr>
          </tbody>
        </table>
      </div>
      <div id="contact" data-aos="fade-left" data-aos-delay="150">
        <span class="section-label">Find Us</span>
        <div class="divider"></div>
        <h2 class="section-title">Contact</h2>
        <div class="contact-card">
          <div class="contact-item">
            <div class="contact-icon">üìç</div>
            <div>
              <span class="contact-label">Address</span>
              <a href="https://www.google.com/maps/search/?api=1&query=1195+Oak+St+San+Francisco+CA+94117" target="_blank">1195 Oak St, San Francisco,<br>CA 94117 ‚Äî Haight-Ashbury</a>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">üìû</div>
            <div>
              <span class="contact-label">Phone</span>
              <a href="tel:4158297413">(415) 829-7413</a>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">‚úâÔ∏è</div>
            <div>
              <span class="contact-label">Email</span>
              <a href="mailto:hello@belunacafe.com">hello@belunacafe.com</a>
            </div>
          </div>
          <div class="social-row">
            <a href="https://www.instagram.com/belunacafe" target="_blank" class="social-btn">üì∏ Instagram</a>
            <a href="https://www.yelp.com/biz/beluna-cafe-san-francisco" target="_blank" class="social-btn">‚≠ê Yelp</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA BANNER -->
<div data-aos="zoom-in">
  <div class="cta-banner">
    <h2>Come As You Are</h2>
    <p>Slow down, sip something special, and find your table at Beluna Cafe.</p>
    <a href="https://www.google.com/maps/search/?api=1&query=1195+Oak+St+San+Francisco+CA+94117" target="_blank" class="btn-white">Get Directions ‚Üí</a>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <p>¬© 2024 Beluna Cafe ¬∑ 1195 Oak St, San Francisco, CA ¬∑ <a href="tel:4158297413">(415) 829-7413</a></p>
  <p style="margin-top:0.4rem;">Website built by <a href="https://platter.site" target="_blank">Platter</a></p>
</footer>

<script type="importmap">{"imports":{"three":"https://unpkg.com/three@0.158.0/build/three.module.js","three/addons/":"https://unpkg.com/three@0.158.0/examples/jsm/"}}</script>

<script type="module">
import * as THREE from 'three';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

const canvas = document.getElementById('three-canvas');
const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0x000000, 0);
renderer.shadowMap.enabled = true;

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 200);
camera.position.set(0, 2, 14);
camera.lookAt(0, 0, 0);

// LIGHTING ‚Äî warm cafe tones
const ambientLight = new THREE.AmbientLight(0xfdf6ec, 1.1);
scene.add(ambientLight);

const sunLight = new THREE.DirectionalLight(0xffe0b2, 2.2);
sunLight.position.set(8, 12, 8);
sunLight.castShadow = true;
scene.add(sunLight);

const fillLight = new THREE.PointLight(0xc87941, 1.8, 40);
fillLight.position.set(-6, 4, 6);
scene.add(fillLight);

const rimLight = new THREE.PointLight(0x6b8f71, 1.2, 30);
rimLight.position.set(4, -3, -6);
scene.add(rimLight);

const warmPoint = new THREE.PointLight(0xffd180, 1.4, 25);
warmPoint.position.set(0, 8, 3);
scene.add(warmPoint);

// Accent materials
const accentMat = new THREE.MeshStandardMaterial({
  color: 0xc87941,
  metalness: 0.7,
  roughness: 0.2
});

const greenMat = new THREE.MeshStandardMaterial({
  color: 0x6b8f71,
  metalness: 0.5,
  roughness: 0.3
});

const creamMat = new THREE.MeshStandardMaterial({
  color: 0xf5e6d0,
  metalness: 0.3,
  roughness: 0.5
});

let mainGroup = new THREE.Group();
scene.add(mainGroup);

let modelLoaded = false;

// Floating decorative geometry (always present as atmosphere)
function createAtmosphere() {
  // Small floating coffee-colored spheres
  const sphereGeo = new THREE.SphereGeometry(0.18, 16, 16);
  const positions = [
    [-5, 3, -2], [5.5, 1, -3], [-4, -2, -1], [6, 4, -4],
    [-6.5, 0, -3], [3, -3, -2], [-2, 4, -5], [7, -1, -2]
  ];
  positions.forEach(([x, y, z], i) => {
    const mat = i % 3 === 0 ? accentMat : (i % 3 === 1 ? greenMat : creamMat);
    const sphere = new THREE.Mesh(sphereGeo, mat.clone());
    sphere.position.set(x, y, z);
    sphere.userData.floatSpeed = 0.4 + Math.random() * 0.4;
    sphere.userData.floatOffset = Math.random() * Math.PI * 2;
    sphere.userData.floatAmp = 0.3 + Math.random() * 0.3;
    scene.add(sphere);
    sphere.userData.isAtmo = true;
  });

  // Torus ‚Äî like a coffee ring / cup top
  const torusGeo = new THREE.TorusGeometry(2.2, 0.22, 16, 60);
  const torus = new THREE.Mesh(torusGeo, accentMat.clone());
  torus.position.set(-5, 1.5, -5);
  torus.rotation.x = Math.PI / 4;
  torus.userData.isRing = true;
  scene.add(torus);

  const torus2Geo = new THREE.TorusGeometry(1.4, 0.14, 12, 50);
  const torus2 = new THREE.Mesh(torus2Geo, greenMat.clone());
  torus2.position.set(5.5, -1, -6);
  torus2.rotation.y = Math.PI / 5;
  torus2.userData.isRing2 = true;
  scene.add(torus2);

  // Rounded box ‚Äî like a pastry/cake shape
  const boxGeo = new THREE.BoxGeometry(1.2, 0.5, 1.2, 4, 2, 4);
  const box = new THREE.Mesh(boxGeo, creamMat.clone());
  box.position.set(4.5, 3.5, -4);
  box.userData.isBox = true;
  scene.add(box);

  // Leaf-like flat disk
  const diskGeo = new THREE.CylinderGeometry(0.8, 0.8, 0.08, 32);
  const disk = new THREE.Mesh(diskGeo, greenMat.clone());
  disk.position.set(-3.5, -3, -3);
  disk.userData.isDisk = true;
  scene.add(disk);
}

createAtmosphere();

// Try to load GLTF model
const loader = new GLTFLoader();
loader.load(
  'https://dl.polyhaven.org/file/ph-assets/Models/gltf/1k/CoffeeCart_01/CoffeeCart_01_1k.gltf',
  (gltf) => {
    modelLoaded = true;
    const model = gltf.scene;

    // Compute bounding box to auto-scale
    const box = new THREE.Box3().setFromObject(model);
    const size = box.getSize(new THREE.Vector3());
    const maxDim = Math.max(size.x, size.y, size.z);
    const scale = 3.5 / maxDim;
    model.scale.setScalar(scale);

    // Center model
    box.setFromObject(model);
    const center = box.getCenter(new THREE.Vector3());
    model.position.sub(center);

    // Apply warm cafe materials
    model.traverse((child) => {
      if (child.isMesh) {
        const oldMat = child.material;
        child.material = new THREE.MeshStandardMaterial({
          color: 0xc87941,
          metalness: 0.65,
          roughness: 0.28,
          envMapIntensity: 1.0
        });
        if (oldMat && oldMat.map) child.material.map = oldMat.map;
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });

    // Position the coffee cart off to the right side
    mainGroup.add(model);
    mainGroup.position.set(3.5, -0.5, 0);
    mainGroup.rotation.y = -0.4;
  },
  undefined,
  (err) => {
    console.log('Model load failed, using fallback geometry');
    createFallback();
  }
);

function createFallback() {
  // Fallback: decorative geometric coffee-themed shapes
  const torusFallGeo = new THREE.TorusGeometry(1.8, 0.45, 20, 80);
  const torusFall = new THREE.Mesh(torusFallGeo, accentMat);
  torusFall.position.set(0, 0.5, 0);
  mainGroup.add(torusFall);

  const icoGeo = new THREE.IcosahedronGeometry(1.2, 1);
  const ico = new THREE.Mesh(icoGeo, creamMat);
  ico.position.set(0, 0, 0);
  mainGroup.add(ico);

  const cylGeo = new THREE.CylinderGeometry(0.6, 0.7, 1.4, 24);
  const cyl = new THREE.Mesh(cylGeo, greenMat);
  cyl.position.set(2, -0.8, 0.5);
  mainGroup.add(cyl);

  mainGroup.position.set(3, 0, 0);
}

// Clock & animation
const clock = new THREE.Clock();

function animate() {
  requestAnimationFrame(animate);
  const t = clock.getElapsedTime();

  // Main group gentle float & rotate
  mainGroup.rotation.y = -0.4 + Math.sin(t * 0.22) * 0.12;
  mainGroup.position.y = -0.5 + Math.sin(t * 0.35) * 0.25;

  // Atmospheric objects
  scene.children.forEach(obj => {
    if (obj.userData.isAtmo) {
      obj.position.y += Math.sin(t * obj.userData.floatSpeed + obj.userData.floatOffset) * 0.002 * obj.userData.floatAmp;
      obj.rotation.y += 0.005;
    }
    if (obj.userData.isRing) {
      obj.rotation.z += 0.004;
      obj.rotation.x = Math.PI / 4 + Math.sin(t * 0.3) * 0.15;
      obj.position.y = 1.5 + Math.sin(t * 0.4) * 0.3;
    }
    if (obj.userData.isRing2) {
      obj.rotation.z -= 0.003;
      obj.position.y = -1 + Math.cos(t * 0.35) * 0.25;
    }
    if (obj.userData.isBox) {
      obj.rotation.y += 0.006;
      obj.position.y = 3.5 + Math.sin(t * 0.5 + 1) * 0.3;
    }
    if (obj.userData.isDisk) {
      obj.rotation.y -= 0.005;
      obj.position.y = -3 + Math.sin(t * 0.45) * 0.25;
    }
  });

  // Gentle camera sway
  camera.position.x = Math.sin(t * 0.1) * 0.5;
  camera.position.y = 2 + Math.cos(t * 0.12) * 0.3;
  camera.lookAt(0, 0, 0);

  renderer.render(scene, camera);
}

animate();

window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// Highlight today's hours row
const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
const today = days[new Date().getDay()];
document.querySelectorAll('.hours-table td:first-child').forEach(td => {
  if (td.textContent.trim() === today) {
    td.closest('tr').classList.add('today-row');
  }
});
</script>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  AOS.init({ duration: 800, once: true, offset: 60 });
</script>
</body>
</html>